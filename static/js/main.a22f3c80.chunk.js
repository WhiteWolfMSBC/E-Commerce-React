(this["webpackJsonpecommerce-with-react"]=this["webpackJsonpecommerce-with-react"]||[]).push([[0],{38:function(e,t,a){e.exports=a(66)},43:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=(a(43),a(19)),s=a(20),m=a(23),i=a(22),u=a(13),d=a(16),p=a.n(d);a(67),a(44),a(48);p.a.initializeApp({apiKey:"AIzaSyDoetawMo5LnYtqQPXMF5O1FWAMpfrtolQ",authDomain:"e-commerce-with-react-fe537.firebaseapp.com",databaseURL:"https://e-commerce-with-react-fe537-default-rtdb.firebaseio.com",projectId:"e-commerce-with-react-fe537",storageBucket:"e-commerce-with-react-fe537.appspot.com",messagingSenderId:"853200980245",appId:"1:853200980245:web:a5a2c7f19ca2d9f0e0411c"});var f=p.a.auth(),b=p.a.firestore(),E=p.a.storage(),g=Object(n.createContext)(),h=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={products:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.products;b.collection("Products").onSnapshot((function(a){a.docChanges().forEach((function(a){"added"===a.type&&t.push({ProductID:a.doc.id,ProductName:a.doc.data().ProductName,ProductPrice:a.doc.data().ProductPrice,ProductImg:a.doc.data().ProductImg}),e.setState({products:t})}))}))}},{key:"render",value:function(){return r.a.createElement(g.Provider,{value:{products:Object(u.a)(this.state.products)}},this.props.children)}}]),a}(r.a.Component),v=a(1),N=a(14),y=a(33),P=a(3),O=a(29),j=a(2),C=a(28);a(62);C.a.configure();var x=function(e,t){var a,n,r,c,l=e.shoppingCart,o=e.totalPrice,s=e.totalQty;switch(t.type){case"ADD_TO_CART":return l.find((function(e){return e.ProductID===t.id}))?(C.a.info("this product is already in your cart",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),e):((a=t.product).qty=1,a.TotalProductPrice=a.ProductPrice*a.qty,c=s+1,r=o+a.ProductPrice,{shoppingCart:[a].concat(Object(u.a)(l)),totalPrice:r,totalQty:c});case"INC":return(a=t.cart).qty=++a.qty,a.TotalProductPrice=a.qty*a.ProductPrice,c=s+1,r=o+a.ProductPrice,n=l.findIndex((function(e){return e.ProductID===t.id})),l[n]=a,{shoppingCart:Object(u.a)(l),totalPrice:r,totalQty:c};case"DEC":return(a=t.cart).qty>1?(a.qty=a.qty-1,a.TotalProductPrice=a.qty*a.ProductPrice,r=o-a.ProductPrice,c=s-1,n=l.findIndex((function(e){return e.ProductID===t.id})),l[n]=a,{shoppingCart:Object(u.a)(l),totalPrice:r,totalQty:c}):e;case"DELETE":var m=l.filter((function(e){return e.ProductID!==t.id}));return c=s-(a=t.cart).qty,r=o-a.qty*a.ProductPrice,{shoppingCart:Object(u.a)(m),totalPrice:r,totalQty:c};case"EMPTY":return{shoppingCart:[],totalPrice:0,totalQty:0};default:return e}},w=Object(n.createContext)(),I=function(e){var t=Object(n.useReducer)(x,{shoppingCart:[],totalPrice:0,totalQty:0}),a=Object(j.a)(t,2),c=a[0],l=a[1];return r.a.createElement(w.Provider,{value:Object(O.a)(Object(O.a)({},c),{},{dispatch:l})},e.children)},S=function(e){var t=e.user,a=Object(P.f)(),c=Object(n.useContext)(w).totalQty;return r.a.createElement("nav",{className:"navbar navbar-expand-lg bg-danger"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(v.b,{className:"navbar-brand text-light fs-4 fw-semibold",to:"/"},"E-Commerce"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.b,{className:"nav-link active text-light fs-5 fw-semibold","aria-current":"page",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.b,{className:"nav-link text-light fs-5 fw-semibold",to:"/signup"},"Sign-Up")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.b,{className:"nav-link text-light fs-5 fw-semibold",to:"/addproducts"},"Add Product"))),r.a.createElement("form",{className:"d-flex",role:"search"},r.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.b,{to:"/",className:"navlink nav-link text-light fs-5 fw-semibold"},t)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.b,{to:"/cartproducts",className:"navlink nav-link text-light fs-5 fw-semibold"},r.a.createElement(N.Icon,{icon:y.cart}))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.b,{className:"nav-link text-light fs-5 fw-semibold",to:"/no-of-products"},c)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btn-outline-light fs-5 fw-semibold",onClick:function(){f.signOut().then((function(){a.push("/login")}))}},"Logout")))))))},D=function(){var e=Object(n.useContext)(g).products,t=Object(n.useContext)(w).dispatch;return r.a.createElement(r.a.Fragment,null,0!==e.length&&r.a.createElement("h1",null,"Products"),r.a.createElement("div",{className:"products-container"},0===e.length&&r.a.createElement("div",null,"slow internet...no products to display"),e.map((function(e){return r.a.createElement("div",{className:"product-card",key:e.ProductID},r.a.createElement("div",{className:"product-img"},r.a.createElement("img",{src:e.ProductImg,alt:"not found"})),r.a.createElement("div",{className:"product-name"},e.ProductName),r.a.createElement("div",{className:"product-price"},"Rs ",e.ProductPrice,".00"),r.a.createElement("button",{className:"addcart-btn",onClick:function(){return t({type:"ADD_TO_CART",id:e.ProductID,product:e})}},"ADD TO CART"))}))))},T=function(e){var t=e.user,a=Object(P.f)();return Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){e||a.push("/login")}))})),r.a.createElement("div",{className:"wrapper"},r.a.createElement(S,{user:t}),r.a.createElement(D,null))},k=function(e){var t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(j.a)(o,2),m=s[0],i=s[1],u=Object(n.useState)(""),d=Object(j.a)(u,2),p=d[0],E=d[1],g=Object(n.useState)(""),h=Object(j.a)(g,2),N=h[0],y=h[1];return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-2 col-lg-1 col-md-1 col-sm-12 col-xs-12"}),r.a.createElement("div",{className:"Product-card col-xl-8 col-lg-4 col-md-1 col-sm-12 col-xs-12"},r.a.createElement("p",{className:"text-center text-primary fs-3 fw-semibold mt-4"},"Sign-Up Form"),r.a.createElement("form",{autoComplete:"off",className:"form-group",onSubmit:function(t){t.preventDefault(),f.createUserWithEmailAndPassword(m,p).then((function(t){b.collection("SignedUpUsersData").doc(t.user.uid).set({Name:c,Email:m,Password:p}).then((function(){l(""),i(""),E(""),y(""),e.history.push("/login")})).catch((function(e){return y(e.message)}))})).catch((function(e){return y(e.message)}))}},r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return l(e.target.value)},value:c,id:"floatingInput",placeholder:"productname",required:!0}),r.a.createElement("label",{for:"floatingInput"},"Enter Your Name")),r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"email",className:"form-control",onChange:function(e){return i(e.target.value)},value:m,id:"floatingInput",placeholder:"productname",required:!0}),r.a.createElement("label",{for:"floatingInput"},"Enter Your Email Address")),r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"password",className:"form-control",onChange:function(e){return E(e.target.value)},value:p,id:"floatingInput",placeholder:"productname",required:!0}),r.a.createElement("label",{for:"floatingInput"},"Enter Your Password")),r.a.createElement("button",{type:"submit",className:"btn btn-warning px-5"},"Sign-Up"),N&&r.a.createElement("span",{className:"error-msg fs-6 fw-light mb-4 mt-4"},N),r.a.createElement("br",null),r.a.createElement("span",{className:"text-secondary fs-6 fw-light mb-4 mt-4"},"Already have an account? Login",r.a.createElement(v.b,{to:"login"}," Here")))),r.a.createElement("div",{className:"col-xl-2 col-lg-1 col-md-1 col-sm-12 col-xs-12"})))},q=function(e){var t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(j.a)(o,2),m=s[0],i=s[1],u=Object(n.useState)(""),d=Object(j.a)(u,2),p=d[0],b=d[1];return r.a.createElement("div",{className:"container-xl mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-2 col-lg-1 col-md-1 col-sm-12 col-xs-12"}),r.a.createElement("div",{className:"Product-card col-xl-8 col-lg-4 col-md-1 col-sm-12 col-xs-12"},r.a.createElement("p",{className:"text-center text-primary fs-3 fw-semibold mt-4"},"Login Form"),r.a.createElement("form",{autoComplete:"off",className:"form-group mb-5",onSubmit:function(t){t.preventDefault(),f.signInWithEmailAndPassword(c,m).then((function(){l(""),i(""),b(""),e.history.push("/")})).catch((function(e){return b(e.message)}))}},r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"email",className:"form-control",onChange:function(e){return l(e.target.value)},value:c,id:"floatingInput",placeholder:"productname",required:!0}),r.a.createElement("label",{for:"floatingInput"},"Enter Your Email Address")),r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"password",className:"form-control",onChange:function(e){return i(e.target.value)},value:m,id:"floatingInput",placeholder:"productname",required:!0}),r.a.createElement("label",{for:"floatingInput"},"Enter Your Password")),r.a.createElement("button",{type:"submit",className:"btn btn-success px-5"},"LOGIN")),p&&r.a.createElement("span",{className:"error-msg fs-6 fw-light mb-4 mt-4"},p),r.a.createElement("span",{className:"text-secondary fs-6 fw-light mb-4 mt-4"},"Don't have an account? Register",r.a.createElement(v.b,{to:"signup"}," Here"))),r.a.createElement("div",{className:"col-xl-2 col-lg-1 col-md-1 col-sm-12 col-xs-12"})))},A=function(){return r.a.createElement("div",null,"notfound")},F=a(35),B=a(36),Q=a(37),U=function(e){var t=e.user,a=Object(n.useContext)(w),c=a.shoppingCart,l=a.dispatch,o=a.totalPrice,s=a.totalQty,m=Object(P.f)();return Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){e||m.push("/login")}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{user:t}),r.a.createElement(r.a.Fragment,null,0!==c.length&&r.a.createElement("h1",null,"Cart"),r.a.createElement("div",{className:"cart-container"},0===c.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"no items in your cart or slow internet causing trouble (Refresh the page) or you are not logged in"),r.a.createElement("div",null,r.a.createElement(v.b,{to:"/"},"Return to Home page"))),c&&c.map((function(e){return r.a.createElement("div",{className:"cart-card",key:e.ProductID},r.a.createElement("div",{className:"cart-img"},r.a.createElement("img",{src:e.ProductImg,alt:"not found"})),r.a.createElement("div",{className:"cart-name"},e.ProductName),r.a.createElement("div",{className:"cart-price-orignal"},"Rs ",e.ProductPrice,".00"),r.a.createElement("div",{className:"inc",onClick:function(){return l({type:"INC",id:e.ProductID,cart:e})}},r.a.createElement(N.Icon,{icon:F.ic_add,size:24})),r.a.createElement("div",{className:"quantity"},e.qty),r.a.createElement("div",{className:"dec",onClick:function(){return l({type:"DEC",id:e.ProductID,cart:e})}},r.a.createElement(N.Icon,{icon:B.ic_remove,size:24})),r.a.createElement("div",{className:"cart-price"},"Rs ",e.TotalProductPrice,".00"),r.a.createElement("button",{className:"delete-btn",onClick:function(){return l({type:"DELETE",id:e.ProductID,cart:e})}},r.a.createElement(N.Icon,{icon:Q.iosTrashOutline,size:24})))})),c.length>0&&r.a.createElement("div",{className:"cart-summary"},r.a.createElement("div",{className:"cart-summary-heading"},"Cart-Summary"),r.a.createElement("div",{className:"cart-summary-price"},r.a.createElement("span",null,"Total Price"),r.a.createElement("span",null,o)),r.a.createElement("div",{className:"cart-summary-price"},r.a.createElement("span",null,"Total Qty"),r.a.createElement("span",null,s)),r.a.createElement(v.b,{to:"cashout",className:"cashout-link"},r.a.createElement("button",{className:"btn btn-success btn-md",style:{marginTop:"5px"}},"Cash on delivery"))))))},R=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),o=Object(j.a)(l,2),s=o[0],m=o[1],i=Object(n.useState)(null),u=Object(j.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(j.a)(f,2),h=g[0],N=g[1],y=["image/png","image/jpeg"];return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container-fluid mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-4"}),r.a.createElement("div",{className:"Product-card col-xl-4"},r.a.createElement("p",{className:"text-center text-primary fs-3 fw-semibold"},"Add Products To Your DataBase"),r.a.createElement("form",{className:"form-group",onSubmit:function(e){e.preventDefault(),E.ref("product-images/".concat(d.name)).put(d).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(t)}),(function(e){return N(e.message)}),(function(){E.ref("product-images").child(d.name).getDownloadURL().then((function(e){b.collection("Products").add({ProductName:a,ProductPrice:Number(s),ProductImg:e}).then((function(){c(""),m(0),p(""),N(""),document.getElementById("file").value=""})).catch((function(e){return N(e.message)}))}))}))},autoComplete:"off"},r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return c(e.target.value)},value:a,id:"floatingInput",placeholder:"productname",required:!0}),r.a.createElement("label",{for:"floatingInput"},"Product Name")),r.a.createElement("div",{className:"form-floating mb-3"},r.a.createElement("input",{type:"number",className:"form-control",onChange:function(e){return m(e.target.value)},value:s,id:"floatingPassword",placeholder:"productprice",required:!0}),r.a.createElement("label",{for:"floatingPassword"},"Product Price")),r.a.createElement("div",{class:"mb-3"},r.a.createElement("label",{for:"formFile",class:"form-label"},"Choose Product Image"),r.a.createElement("input",{class:"form-control",onChange:function(e){var t=e.target.files[0];t&&y.includes(t.type)?(p(t),N("")):(p(null),N("Please select a valid image type (jpg or png)"))},type:"file",id:"formFile",required:!0})),r.a.createElement("center",null,r.a.createElement("button",{className:"btn btn-success px-5 text-center mb-4"},"Add Product"))),h&&r.a.createElement("span",{className:"error-msg"},h),r.a.createElement(v.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-primary form-control mt-5 px-5 mb-4"},"back to Home"))),r.a.createElement("div",{className:"col-xl-4"}))))},Y=function(e){var t=Object(P.f)(),a=Object(n.useContext)(w),c=(a.shoppingCart,a.totalPrice),l=a.totalQty,o=a.dispatch,s=Object(n.useState)(""),m=Object(j.a)(s,2),i=m[0],u=m[1],d=Object(n.useState)(""),p=Object(j.a)(d,2),E=p[0],g=p[1],h=Object(n.useState)(""),v=Object(j.a)(h,2),N=v[0],y=v[1],O=Object(n.useState)(""),C=Object(j.a)(O,2),x=C[0],I=C[1],D=Object(n.useState)(""),T=Object(j.a)(D,2),k=T[0],q=T[1],A=Object(n.useState)(""),F=Object(j.a)(A,2),B=F[0],Q=F[1];Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){e?b.collection("SignedUpUsersData").doc(e.uid).onSnapshot((function(e){u(e.data().Name),g(e.data().Email)})):t.push("/login")}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{user:e.user}),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h2",null,"Cashout Details"),r.a.createElement("br",null),B&&r.a.createElement("div",{className:"success-msg"},B),r.a.createElement("form",{autoComplete:"off",className:"form-group",onSubmit:function(e){e.preventDefault(),f.onAuthStateChanged((function(e){if(e){var a=(new Date).getTime();b.collection("Buyer-info "+e.uid).doc("_"+a).set({BuyerName:i,BuyerEmail:E,BuyerCell:N,BuyerAddress:x,BuyerPayment:c,BuyerQuantity:l}).then((function(){y(""),I(""),o({type:"EMPTY"}),Q("Your order has been placed successfully. Thanks for visiting us. You will be redirected to home page after 5 seconds"),setTimeout((function(){t.push("/")}),5e3)})).catch((function(e){return q(e.message)}))}}))}},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",className:"form-control",required:!0,value:i,disabled:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",required:!0,value:E,disabled:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"Cell No"},"Cell No"),r.a.createElement("input",{type:"number",className:"form-control",required:!0,onChange:function(e){return y(e.target.value)},value:N,placeholder:"eg 03123456789"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"Delivery Address"},"Delivery Address"),r.a.createElement("input",{type:"text",className:"form-control",required:!0,onChange:function(e){return I(e.target.value)},value:x}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"Price To Pay"},"Price To Pay"),r.a.createElement("input",{type:"number",className:"form-control",required:!0,value:c,disabled:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"Total No of Products"},"Total No of Products"),r.a.createElement("input",{type:"number",className:"form-control",required:!0,value:l,disabled:!0}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-success btn-md mybtn"},"SUBMIT")),k&&r.a.createElement("span",{className:"error-msg"},k)))},L=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.onAuthStateChanged((function(t){t?b.collection("SignedUpUsersData").doc(t.uid).get().then((function(t){e.setState({user:t.data().Name})})):e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(h,null,r.a.createElement(I,null,r.a.createElement(v.a,null,r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/",component:function(){return r.a.createElement(T,{user:e.state.user})}}),r.a.createElement(P.a,{exact:!0,path:"/signup",component:k}),r.a.createElement(P.a,{exact:!0,path:"/login",component:q}),r.a.createElement(P.a,{exact:!0,path:"/cartproducts",component:function(){return r.a.createElement(U,{user:e.state.user})}}),r.a.createElement(P.a,{exact:!0,path:"/addproducts",component:R}),r.a.createElement(P.a,{exact:!0,path:"/cashout",component:function(){return r.a.createElement(Y,{user:e.state.user})}}),r.a.createElement(P.a,{component:A})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(65);l.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.a22f3c80.chunk.js.map